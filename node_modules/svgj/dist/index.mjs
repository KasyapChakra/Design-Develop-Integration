import $ from"htmlparser2";import i from"domelementtype";import{camelCase as h}from"lodash-es";var m=new Map([["altglyph","altGlyph"],["altglyphdef","altGlyphDef"],["altglyphitem","altGlyphItem"],["animatecolor","animateColor"],["animatemotion","animateMotion"],["animatetransform","animateTransform"],["clippath","clipPath"],["feblend","feBlend"],["fecolormatrix","feColorMatrix"],["fecomponenttransfer","feComponentTransfer"],["fecomposite","feComposite"],["feconvolvematrix","feConvolveMatrix"],["fediffuselighting","feDiffuseLighting"],["fedisplacementmap","feDisplacementMap"],["fedistantlight","feDistantLight"],["fedropshadow","feDropShadow"],["feflood","feFlood"],["fefunca","feFuncA"],["fefuncb","feFuncB"],["fefuncg","feFuncG"],["fefuncr","feFuncR"],["fegaussianblur","feGaussianBlur"],["feimage","feImage"],["femerge","feMerge"],["femergenode","feMergeNode"],["femorphology","feMorphology"],["feoffset","feOffset"],["fepointlight","fePointLight"],["fespecularlighting","feSpecularLighting"],["fespotlight","feSpotLight"],["fetile","feTile"],["feturbulence","feTurbulence"],["foreignobject","foreignObject"],["glyphref","glyphRef"],["lineargradient","linearGradient"],["radialgradient","radialGradient"],["textpath","textPath"]]),c=new Map([["class","className"],["id","id"],["title","title"],["definitionurl","definitionURL"],["attributename","attributeName"],["attributetype","attributeType"],["basefrequency","baseFrequency"],["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]]);var L=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function y(e,t){if(!e)return;let r="";for(let[n,a]of Object.entries(e))n=n.startsWith("data-")||n.startsWith("aria-")?n:c.get(n)??h(n),!t.removeAttrs[n]&&(a?r+=` ${n}={\`${a||""}\`}`:r+=" "+n);return r.trimStart()}var p=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),s=Object.freeze({removeAttrs:Object.freeze({xmlns:!0}),addProps:Object.freeze({svg:Object.freeze({props:"..."})})});function o(e,t=s){let r=Array.isArray(e)||e.cheerio?e:[e],n="";for(let a=0;a<r.length;a++)n+=x(r[a],t);return n}function x(e,t){switch(e.type){case i.Root:return o(e.children,t);case i.Directive:case i.Doctype:return N(e);case i.Comment:return C(e);case i.CDATA:return k(e);case i.Script:case i.Style:case i.Tag:return b(e,t);case i.Text:return v(e,t)}}function D(e){let t="";for(let[r,n]of Object.entries(e))n==="..."?t+=` {...${r}}`:t+=` ${r}={${n}}`;return t.trimStart()}var O=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),S=new Set(["svg","math"]);function b(e,t){t.xmlMode==="foreign"&&(e.name=m.get(e.name)??e.name,e.parent&&O.has(e.parent.name)&&(t={...t,xmlMode:!1})),!t.xmlMode&&S.has(e.name)&&(t={...t,xmlMode:"foreign"});let r=`<${e.name}`,n=y(e.attribs,t);n&&(r+=` ${n}`);let a=t.addProps[e.tagName.toLowerCase()];if(a&&(r+=D(a)),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&p.has(e.name)))t.xmlMode||(r+=" "),r+="/>";else{if(r+=">",e.children.length>0&&(e.tagName==="script"||e.tagName==="iframe"||e.tagName==="style")){r+="dangerouslySetInnerHTML={`";for(let l of e.children)r+=(l.data??"").replace(/(\{|\}|`)/gm,"\\$1");r+="`}"}else e.children.length>0&&(r+=o(e.children,t));(t.xmlMode||!p.has(e.name))&&(r+=`</${e.name}>`)}return r}function N(e){return""}function v(e,t){return e.data?.trim()===""?"":`{\`${(e.data||"").replace(/(\{|\}|`)/gm,"\\$1")}\`}`}function k(e){return""}function C(e){return""}function M(e){let t="{",r="";for(let[n,a]of Object.entries(e))a==="..."?r=n:a===" "?t+=` ${n},`:t+=` ${n}: ${a}`;return r&&(t+=` ...${r}`),t=t.trim()+" }",t}var d=Object.freeze({props:"..."});function T(e,t="ReactComponent",r="* as React",n="react",a=t,l=d,g=s,f=!1){let u=$.parseDocument(e);return`import ${r} from "${n}";

${a==="default"?"export default":`export const ${a} =`} ${f?"React.memo(":""}(${M(l)}) => (
  ${o(u,g)}
)${f?")":""};

${a!=="default"?`let src = ${JSON.stringify(e)};
export default src;`:""}
`}export{s as defaultOpts,d as defaultProps,T as render};
